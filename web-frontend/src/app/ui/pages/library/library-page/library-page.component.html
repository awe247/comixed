<p-tabView
  [activeIndex]='current_tab'
  (onChange)='set_current_tab($event.index)'> <p-tabPanel
  [disabled]='!comics'
  header='Covers'> <p-dataView
  #comicCoverView
  filterBy='series'
  [value]='comics'
  [rows]='rows'
  paginator='true'
  paginatorPosition='both'
  [sortField]='sort_by'
  emptyMessage='No comics found.'> <p-header>
<div class='ui-helper-clearfix'>
  <div class='ui-g'>
    <div class='ui-g-1 ui-md-1'>
      Sort by:
      <p-dropdown
        [options]='sort_options'
        [(ngModel)]='sort_by'
        (onChange)='set_sort_order($event.value)'></p-dropdown>
    </div>
    <div class='ui-g-1 ui-md-1'>
      Group by:
      <p-dropdown
        [options]='group_options'
        [(ngModel)]='group_by'
        (onChange)='set_group_by($event.value)'></p-dropdown>
    </div>
    <div class='ui-g-1 ui-md-1'>
      Show:
      <p-dropdown
        [options]='rows_options'
        [(ngModel)]='rows'
        (onChange)='set_rows($event.value)'></p-dropdown>
    </div>
    <div class='ui-g-3 ui-md-3'>
      Search comic names: <input
        type='search'
        pInputText
        placeholder='Search by series name'
        [style.width]='"100%"'
        (keyup)='comicCoverView.filter($event.target.value)'>
    </div>
    <div class='ui-g-5 ui-md-5'>
      Cover size: {{ cover_size }}px
      <p-slider
        [(ngModel)]='cover_size'
        [min]='200'
        [max]='640'
        [animate]='true'
        pTooltip='The cover size only applies to the grid view...'
        tooltipPosition='right'
        (onChange)='set_cover_size($event.value)'></p-slider>
    </div>
    <div
      class='ui-g-1 ui-md-1'
      style='text-align: right'>
      <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
    </div>
  </div>
</div>
</p-header> <ng-template
  let-comic
  pTemplate='listItem'>
<div class='ui-g'>
  <div class='ui-g-2 ui-md-2'>
    <p-card> <img
      [src]='get_cover_url(comic)'
      width='auto'
      [style.width]='"100%"'
      [style.height]='"auto"'> </p-card>
  </div>
  <div class='ui-g-10 ui-md-10'>
    <div>
      <div class='ui-g'>
        <div class='ui-g-12 ui-sm-12'>
          <h4>{{ get_comic_title(comic) }}</h4>
        </div>
        <div class='ui-g-12 ui-sm-12'>
          <p-panel
            *ngIf='comic.description'
            header='Description'
            [toggleable]='true'
            [collapsed]='true'
            [style.width]='"100%"'>
          <div [innerHTML]='comic.description'></div>
          </p-panel>
        </div>
      </div>
      <button
        pButton
        type='button'
        icon='pi pi-search'
        (click)='set_selected_comic($event, comic)'
        label='Details'></button>
      <a [routerLink]='[comic.id]'><button
          pButton
          type='button'
          icon='pi pi-folder-open'
          label='Open'></button></a>
    </div>
  </div>
</div>
</ng-template> <ng-template
  let-comic
  pTemplate='gridItem'>
<div>
  <p-card> <img
    [src]='get_cover_url(comic)'
    width='auto'
    [style.height]='"" + cover_size + "px"'> <p-footer>
  <button
    pButton
    type='button'
    icon='pi pi-search'
    (click)='set_selected_comic($event, comic)'></button>
  <a [routerLink]='[comic.id]'><button
      pButton
      type='button'
      icon='pi pi-folder-open'></button></a> </p-footer></p-card>
</div>
</ng-template> </p-dataView></p-tabPanel> <p-tabPanel
  [disabled]='!comics'
  header='Details'> <p-table
  #comicDetailView
  [value]='comics'
  paginator='true'
  paginatorPosition='both'
  [rows]='rows'
  [globalFilterFields]='["series"]'
  [sortField]='sort_by'> <ng-template pTemplate='caption'>
<div class='ui-g'>
  <div class='ui-g-1 ui-md-1'>
    Sort by:
    <p-dropdown
      [options]='sort_options'
      [(ngModel)]='sort_by'
      (onChange)='set_sort_order($event.value)'></p-dropdown>
  </div>
  <div class='ui-g-1 ui-md-1'>
    Group by:
    <p-dropdown
      [options]='group_options'
      [(ngModel)]='group_by'
      (onChange)='set_group_by($event.value)'></p-dropdown>
  </div>
  <div class='ui-g-1 ui-md-1'>
    Show:
    <p-dropdown
      [options]='rows_options'
      [(ngModel)]='rows'
      (onChange)='set_rows($event.value)'></p-dropdown>
  </div>
  <div class='ui-g-3 ui-md-3'>
    Search comic names: <input
      type='search'
      pInputText
      placeholder='Search by series name'
      [style.width]='"100%"'
      (keyup)='comicDetailView.filterGlobal($event.target.value, "contains")'>
  </div>
</div>
</ng-template> <ng-template pTemplate='header'>
<tr>
  <th>Cover</th>
  <th>Series</th>
  <th>Volume</th>
  <th>Issue #</th>
  <th># Pages</th>
  <th>Published</th>
  <th>Date Added</th>
  <th></th>
</tr>
</ng-template> <ng-template
  pTemplate='body'
  let-comic>
<tr>
  <td><img
    [style.height]='"auto"'
    [style.width]='"100%"'
    [src]='get_cover_url(comic)'>
  <td>{{ comic.series }}</td>
  <td>{{ comic.volume }}</td>
  <td>{{ comic.issue_number }}</td>
  <td>{{ comic.page_count || 0}}</td>
  <td>{{ comic.cover_date | date }}</td>
  <td>{{ comic.added_date | date }}</td>
  <td><a [routerLink]='[comic.id]'>
      <button
        pButton
        type='button'
        icon='pi pi-folder-open'></button>
  </a>
    <button
      pButton
      type='button'
      icon='pi pi-search'
      (click)='set_selected_comic($event, comic)'></button></td>
</tr>
</ng-template> </p-table></p-tabPanel></p-tabView>
<!-- details dialog -->
<p-dialog
  *ngIf='selected_comic'
  [header]='get_comic_title(selected_comic)'
  [(visible)]='show_dialog'
  [responsive]='true'
  [modal]='true'
  [blockScroll]='true'
  [resizable]='false'
  (onAfterHide)='hide_dialog()'>
<div
  class='ui-g'
  *ngIf='selected_comic'>
  <div class='ui-g-2 ui-sm-2'>
    <img
      [src]='get_cover_url(selected_comic)'
      [style.height]='"auto"'
      [style.width]='"100%"'>
  </div>
  <div
    *ngIf='selected_comic.description'
    class='ui-g-10 ui-sm-10'>
    <div class='ui-g'>
      <div class='ui-g-12 ui-sm-12'>
        <p-panel
          header='Description'
          [toggleable]='true'>
        <div
          [innerHTML]='selected_comic.description || "There is no description for this comic."'></div>
        </p-panel>
      </div>
    </div>
    <div
      *ngIf='selected_comic.credits?.length'
      class='ui-g-12 ui-sm-12'>
      <p-table [value]='selected_comic.credits'> <ng-template
        pTemplate='header'>
      <tr>
        <th>Name</th>
        <th>Role</th>
      </tr>
      </ng-template> <ng-template
        pTemplate='body'
        let-credit>
      <tr>
        <td>{{ credit.name }}</td>
        <td>{{ credit.role }}</td>
      </ng-template> </p-table>
    </div>
  </div>
</div>
</p-dialog>