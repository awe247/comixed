<div *ngIf='importing'>
  <h2 class='text-center'>Importing {{pending_imports}} Comics...</h2>
  <div id='busy_indicator'></div>
</div>
<div *ngIf='busy'>
  <h2 class='text-center'>Fetching List Of Comic Files...</h2>
  <div id='busy_indicator'></div>
</div>
<div id='comic-selection-list'
  [class.import-backdrop]='busy || importing'>
  <div class='row'>
    <div class='col-md-2'></div>
    <div class='col-md-10'>
      <h2 class='ui header'>Import Comics</h2>
      <form #f='ngForm' (ngSubmit)='on_load()' class='ui form'>
        <div class='field'>
          <label for='directory'>Root directory:</label> <input
            type='text' id='directory' placeholder='Root Directory'
            [formControl]='directoryForm.controls["directory"]'>
          <button type='submit' class='btn btn-primary'>Load</button>
          <button *ngIf='this.files && this.files.length != 0'
            class='btn btn-default' type='button'
            (click)='import_selected_files()'>Import</button>
        </div>
      </form>
    </div>
  </div>
  <div *ngIf='this.files && this.files.length > 0'>
    <div class='row py-3'>
      <div class='col'></div>
      <div class='col-1 justify-content-center'>
        <button class='btn btn-sm btn-primary'
          (click)='select_all_files()'>Select All</button>
      </div>
    </div>
    <div
      *ngFor='let file of this.files | paginate: { itemsPerPage: 25, currentPage: current_page }'
      class='row pb-3'>
      <div class='col'>
        <app-import-comic-list-entry [file_details]='file'
          [cover_size]='cover_size'></app-import-comic-list-entry>
      </div>
      <div class='col-1 justify-content-center'>
        <button *ngIf='!file.selected' class='btn btn-sm btn-primary'
          (click)='toggle_comic_selection(file)'>Select</button>
        <button *ngIf='file.selected' class='btn btn-sm btn-danger'
          (click)='toggle_comic_selection(file)'>Deselect</button>
      </div>
    </div>
  </div>
</div>
<div *ngIf='this.files.length > 0'
  class='fixed-bottom w-100 border pb-3 bg-secondary text-white justify-content-center'>
  <div class='row'>
    <div class='col-4'>You have selected {{selected_file_count}}
      of {{files.length}} comics found.</div>
    <div class='col-2'>
      <button class='btn btn-sm btn-info'
        (click)='show_selections_only = !show_selections_only'>{{
        show_selections_only ? 'Show All Comics' : 'Show Selected
        Comics'}}</button>
    </div>
    <div class='col'>
      <pagination-controls (pageChange)='current_page = $event'></pagination-controls>
    </div>
  </div>
</div>