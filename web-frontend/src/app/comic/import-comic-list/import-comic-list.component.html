<div *ngIf='importing'>
  <h2 class='text-center'>Importing {{pending_imports}} Comics...</h2>
  <div id='busy_indicator'></div>
</div>
<div *ngIf='busy'>
  <h2 class='text-center'>Fetching List Of Comic Files...</h2>
  <div id='busy_indicator'></div>
</div>
<div [class.import-backdrop]='busy || importing'>
  <div class='row'>
    <div class='col-md-2'></div>
    <div class='col-md-10'>
      <h2 class='ui header'>Import Comics</h2>
      <form #f='ngForm' (ngSubmit)='onLoad()' class='ui form'>
        <div class='field'>
          <label for='directory'>Root directory:</label> <input
            type='text' id='directory' placeholder='Root Directory'
            [formControl]='directoryForm.controls["directory"]'>
          <button type='submit' class='btn btn-primary'>Load</button>
          <button *ngIf='this.files && this.files.length != 0'
            class='btn btn-default' type='button'
            (click)='importFiles()'>Import</button>
        </div>
      </form>
    </div>
  </div>
  <div class='row'>
    <div class='col-md-2'></div>
    <div class='col-md-10'>
      <div *ngIf='!this.files || this.files.length == 0'>
        <p>Nothing new to import...
      </div>
      <div *ngIf='this.files && this.files.length > 0'>
        <p>Found {{ this.files.length }} {{ plural ? 'comics' :
          'comic' }} for import.</p>
      </div>
    </div>
  </div>
  <div *ngIf='this.files && this.files.length > 0'>
    <div class='row py-3'>
      <div class='col'></div>
      <div class='col-1 justify-content-center'>
        <button class='btn btn-sm btn-primary'
          (click)='selectAllFiles()'>Select All</button>
      </div>
    </div>
    <div *ngFor='let file of this.files' class='row pb-3'>
      <div class='col'>
        <app-import-comic-list-entry [file_details]='file'
          [cover_size]='cover_size'></app-import-comic-list-entry>
      </div>
      <div class='col-1 justify-content-center'>
        <button *ngIf='!file.selected' class='btn btn-sm btn-primary'
          (click)='file.selected = true'>Select</button>
        <button *ngIf='file.selected' class='btn btn-sm btn-danger'
          (click)='file.selected = false'>Deselect</button>
      </div>
    </div>
  </div>
</div>
