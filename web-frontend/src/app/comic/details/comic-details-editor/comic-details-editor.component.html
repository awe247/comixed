<div class='container-fluid'>
  <div *ngIf='!show_candidates()' class='row w-100 p-3'>
    <form>
      <div>
        <dl>
          <dt>
            <label for='api_key'>API Key:</label>
          <dt>
          <dd>
            <div class='row'>
              <div class='col'>
                <input type='text' class='form-control' required
                  name='api_key' [(ngModel)]='api_key'>
              </div>
              <div class='col-2'>
                <button type='button' class='btn btn-primary'
                  (click)='save_api_key()'
                  [disabled]='!is_api_key_valid()'>Save Key</button>
              </div>
            </div>
          </dd>
          <dt>
            <label for='series'>Series name:</label>
          </dt>
          <dd>
            <input type='text' class='form-control' required
              name='series' [(ngModel)]='series'>
          </dd>
          <dt>
            <label for='volume'>Volume:</label>
          </dt>
          <dd>
            <input type='text' class='form-control' name='volume'
              [(ngModel)]='volume'>
          </dd>
          <dt>
            <label for='issue_number'>Issue number:</label>
          </dt>
          <dd>
            <input type='text' class='form-control' name='issue_number'
              [(ngModel)]='issue_number'>
          </dd>
        </dl>
      </div>
    </form>
    <div class='container w-100 pb-1 justify-content-center mx-0'>
      <button class='btn btn-primary' type='button'
        (click)='save_changes()'>Save</button>
      <button class='btn btn-info' type='button'
        (click)='fetch_candidates()'>Fetch</button>
    </div>
  </div>
  <div *ngIf='show_candidates()' class='row w-100 mx-0'>
    <div class='row w-100 justify-content-center mx-0'>
      <h2 class='w-100 text-center'>Found {{ volumes.length }}
        Volumes</h2>
      <h3 class='w-100 text-center'>{{volume_selection_banner}}</h3>
    </div>
    <div class='col table-container'>
      <table class='table table-sm table-fixed'>
        <thead>
          <tr class='d-flex'>
            <th class='col-1' scope='col'>#</th>
            <th class='col-4' scope='col'>Name</th>
            <th class='col-2' scope='col'># Issues</th>
            <th class='col-3' scope='col'>Publisher</th>
            <th class='col-2' scope='col'>Since</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor='let volume of volumes; let i = index'
            class='d-flex' (click)='set_current_volume(i)'
            [class.table-primary]='is_good_match(volume)'
            [class.table-secondary]='is_perfect_match(volume)'>
            <th class='col-1' scope='row'>{{ i + 1 }}</th>
            <td class='col-4'>{{ volume.name }}</td>
            <td class='col-2'>{{ volume.issue_count }}</td>
            <td class='col-3'>{{ volume.publisher }}</td>
            <td class='col-2'>{{ volume.start_year }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class='col-3'>
      <div class='card w-100'>
        <div *ngIf='current_issue' class='card-body'>
          <img class='card-img-bottom img-fluid'
            src='{{get_current_issue_image_url()}}'
            alt={{current_issue.name}}>
        </div>
        <div class='card-footer'>
          <div *ngIf='current_issue'
            class='row w-100 justify-content-center pb-1'>
            <button class='btn btn-primary ml-1 w-75' type='button'
              (click)='select_current_issue()'>Select</button>
          </div>
          <div *ngIf='!current_issue'>
            <p class='text-danger'>No issue in this volume matches
              the search details entered.</p>
          </div>
          <!-- div class='row w-100 justify-content-center'>
            <select id='comicvine-issue-selection'
              class='form-control w-75' #selectElem
              (change)='set_current_volume_by_id(selectElem.value)'>
              <option *ngFor='let volume of volumes' [value]='volume.id'>{{get_volume_option_label(volume)}}</option>
            </select>
          </div -->
        </div>
      </div>
    </div>
  </div>
</div>
